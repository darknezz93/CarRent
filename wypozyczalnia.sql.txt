-- Generated by Oracle SQL Developer Data Modeler 4.0.3.853
--   at:        2014-12-17 22:20:47 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g




CREATE TABLE Klient
  (
    id_klienta          INTEGER NOT NULL ,
    imie                VARCHAR2 (15) NOT NULL ,
    nazwisko            VARCHAR2 (20) NOT NULL ,
    telefon             INTEGER NOT NULL ,
    ulica               VARCHAR2 (20) NOT NULL ,
    numer               INTEGER NOT NULL ,
    miasto              VARCHAR2 (20) NOT NULL ,
    nr_karty_kredytowej INTEGER
  ) ;
ALTER TABLE Klient ADD CONSTRAINT Klient_PK PRIMARY KEY ( id_klienta ) ;

CREATE TABLE Miejsce
  (
    id_miejsca INTEGER NOT NULL ,
    ulica      VARCHAR2 (20) NOT NULL ,
    numer      INTEGER NOT NULL ,
    miasto     VARCHAR2 (20) NOT NULL
  ) ;
ALTER TABLE Miejsce ADD CONSTRAINT Miejsce_PK PRIMARY KEY ( id_miejsca ) ;

CREATE TABLE Pracownik
  (
    id_pracownika     INTEGER NOT NULL ,
    imie              VARCHAR2 (15) NOT NULL ,
    nazwisko          VARCHAR2 (20) NOT NULL ,
    data_zatrudnienia DATE NOT NULL ,
    pensja            INTEGER NOT NULL ,
    telefon           INTEGER NOT NULL
  ) ;
ALTER TABLE Pracownik ADD CONSTRAINT Pracownik_PK PRIMARY KEY ( id_pracownika ) ;

CREATE TABLE Samochód
  (
    id_samochodu   INTEGER NOT NULL ,
    cena_za_dobe   INTEGER NOT NULL ,
    marka          VARCHAR2 (25) NOT NULL ,
    data_produkcji DATE NOT NULL ,
    kolor          VARCHAR2 (15) ,
    przebieg       INTEGER ,
    pojemnosc_silnika FLOAT
  ) ;
ALTER TABLE Samochód ADD CONSTRAINT Samochód_PK PRIMARY KEY ( id_samochodu ) ;

CREATE TABLE Wypo¿yczenie
  (
    id_wypozyczenia         INTEGER NOT NULL ,
    data_wypozyczenia       DATE NOT NULL ,
    Samochód_id_samochodu   INTEGER NOT NULL ,
    Miejsce_id_miejsca      INTEGER NOT NULL ,
    Pracownik_id_pracownika INTEGER NOT NULL ,
    Klient_id_klienta       INTEGER NOT NULL
  ) ;
ALTER TABLE Wypo¿yczenie ADD CONSTRAINT Wypo¿yczenie_PK PRIMARY KEY ( id_wypozyczenia, Klient_id_klienta ) ;

ALTER TABLE Wypo¿yczenie ADD CONSTRAINT Wypo¿yczenie_Klient_FK FOREIGN KEY ( Klient_id_klienta ) REFERENCES Klient ( id_klienta ) ;

ALTER TABLE Wypo¿yczenie ADD CONSTRAINT Wypo¿yczenie_Miejsce_FK FOREIGN KEY ( Miejsce_id_miejsca ) REFERENCES Miejsce ( id_miejsca ) ;

ALTER TABLE Wypo¿yczenie ADD CONSTRAINT Wypo¿yczenie_Pracownik_FK FOREIGN KEY ( Pracownik_id_pracownika ) REFERENCES Pracownik ( id_pracownika ) ;

ALTER TABLE Wypo¿yczenie ADD CONSTRAINT Wypo¿yczenie_Samochód_FK FOREIGN KEY ( Samochód_id_samochodu ) REFERENCES Samochód ( id_samochodu ) ;

CREATE SEQUENCE id_klienta_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER Klient_id_klienta_TRG BEFORE
  INSERT ON Klient FOR EACH ROW WHEN (NEW.id_klienta IS NULL) BEGIN :NEW.id_klienta := id_klienta_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE id_miejsca_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER Miejsce_id_miejsca_TRG BEFORE
  INSERT ON Miejsce FOR EACH ROW WHEN (NEW.id_miejsca IS NULL) BEGIN :NEW.id_miejsca := id_miejsca_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE id_pracownika_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER Pracownik_id_pracownika_TRG BEFORE
  INSERT ON Pracownik FOR EACH ROW WHEN (NEW.id_pracownika IS NULL) BEGIN :NEW.id_pracownika := id_pracownika_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE id_samochodu_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER Samochód_id_samochodu_TRG BEFORE
  INSERT ON Samochód FOR EACH ROW WHEN (NEW.id_samochodu IS NULL) BEGIN :NEW.id_samochodu := id_samochodu_SEQ.NEXTVAL;
END;
/

CREATE SEQUENCE id_wypozyczenia_SEQ START WITH 1 NOCACHE ORDER ;
CREATE OR REPLACE TRIGGER Wypo¿yczenie_id_wypozyczenia BEFORE
  INSERT ON Wypo¿yczenie FOR EACH ROW WHEN (NEW.id_wypozyczenia IS NULL) BEGIN :NEW.id_wypozyczenia := id_wypozyczenia_SEQ.NEXTVAL;
END;
/


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             5
-- CREATE INDEX                             0
-- ALTER TABLE                              9
-- CREATE VIEW                              0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           5
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          5
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
